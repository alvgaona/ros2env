---
title: Contributing
description: Development guidelines and contribution process
---
import { Tabs, TabItem, Aside, Card, CardGrid, Steps, FileTree, LinkCard, Badge } from '@astrojs/starlight/components';

## Welcome Contributors!

**ros2env** is the project name. The binary is called `rosenv`.

We welcome contributions of all kinds: bug fixes, new features, documentation improvements, and more. This guide will
help you get started with development.

<CardGrid>
  <Card title="üêõ Bug Reports" icon="warning">
    Found a bug? [Open an issue](https://github.com/alvgaona/ros2env/issues/new) with details and reproduction steps.
  </Card>
  <Card title="‚ú® Feature Requests" icon="rocket">
    Have an idea? [Start a discussion](https://github.com/alvgaona/ros2env/issues/new) to propose new features.
  </Card>
  <Card title="üìñ Documentation" icon="document">
    Improve docs by fixing typos, adding examples, or clarifying instructions.
  </Card>
  <Card title="üß™ Testing" icon="approve-check">
    Add test cases, improve coverage, or report edge cases.
  </Card>
</CardGrid>

---

## Development Setup

### Prerequisites

<CardGrid>
  <Card title="Rust 1.92+" icon="rocket">
    Install via [rustup](https://rustup.rs/)
    
    ```bash
    curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh
    ```
  </Card>
  <Card title="Git" icon="github">
    Version control for cloning and contributing
    
    ```bash
    # macOS
    brew install git
    
    # Linux (Ubuntu/Debian)
    sudo apt install git
    ```
  </Card>
</CardGrid>

### Clone the Repository

<Steps>

1. **Fork the repository** on GitHub

   Visit [github.com/alvgaona/ros2env](https://github.com/alvgaona/ros2env) and click "Fork"

2. **Clone your fork**

   <Tabs>
     <TabItem label="HTTPS">

   ```bash
   git clone https://github.com/YOUR_USERNAME/ros2env.git
   cd ros2env
   ```

     </TabItem>
     <TabItem label="SSH">

   ```bash
   git clone git@github.com:YOUR_USERNAME/ros2env.git
   cd ros2env
   ```

     </TabItem>
   </Tabs>

3. **Add upstream remote**

   ```bash
   git remote add upstream https://github.com/alvgaona/ros2env.git
   ```

4. **Build the project**

   ```bash
   cargo build --release
   ```

   The binary will be at `target/release/rosenv`

5. **Verify the build**

   ```bash
   ./target/release/rosenv --version
   ```

</Steps>

<Aside type="tip" title="Quick Build">
Use `cargo build` (without `--release`) for faster compilation during development. Release builds are optimized but
take longer.
</Aside>

---

## Project Structure

<FileTree>

- src/
  - main.rs <Badge text="849 lines" variant="note" /> All application logic
- tests/
  - integration_tests.rs <Badge text="15 tests" variant="success" /> CLI integration tests
  - edge_cases.rs <Badge text="14 tests" variant="success" /> Filesystem edge cases
- recipe/
  - recipe.yaml Conda package recipe (rattler-build)
- .github/workflows/
  - ci.yml Run tests, clippy, formatting
  - release.yml Build and publish releases
  - deploy-docs.yml Deploy documentation site
- docs/ <Badge text="Astro Starlight" variant="tip" /> Documentation site
  - src/content/docs/ Markdown documentation pages
  - astro.config.mjs Site configuration
- Cargo.toml Package metadata and dependencies
- README.md Project overview
- LICENSE <Badge text="MIT" variant="default" /> MIT license

</FileTree>

<Aside type="note" title="Single-File Architecture">
The entire application logic is in `src/main.rs` (849 lines). This keeps the codebase simple and easy to navigate for
contributors.
</Aside>

---

## Testing

<Badge text="39 tests" variant="success" size="large" />
<Badge text="~54% line coverage" variant="note" size="large" />
<Badge text="78% function coverage" variant="success" size="large" />

### Run All Tests

```bash
cargo test
```

### Test Categories

<CardGrid>
  <Card title="Unit Tests" icon="approve-check">
    <Badge text="10 tests" variant="success" />
    
    Core functions and helpers in `src/main.rs`
    
    ```bash
    cargo test --bin rosenv
    ```
  </Card>
  
  <Card title="Edge Case Tests" icon="warning">
    <Badge text="14 tests" variant="success" />
    
    Filesystem operations in `tests/edge_cases.rs`
    
    ```bash
    cargo test --test edge_cases
    ```
  </Card>
  
  <Card title="Integration Tests" icon="rocket">
    <Badge text="15 tests" variant="success" />
    
    CLI commands in `tests/integration_tests.rs`
    
    ```bash
    cargo test --test integration_tests
    ```
  </Card>
</CardGrid>

### Advanced Testing

<Tabs>
  <TabItem label="Specific Test">

```bash
# Run a specific test by name
cargo test test_list_command

# Run with output
cargo test test_list_command -- --nocapture
```

  </TabItem>
  <TabItem label="Coverage Report">

```bash
# Install coverage tool
cargo install cargo-llvm-cov

# Generate coverage report
cargo llvm-cov --all-features --workspace

# Generate HTML report
cargo llvm-cov --all-features --workspace --html
```

  </TabItem>
  <TabItem label="Watch Mode">

```bash
# Install cargo-watch
cargo install cargo-watch

# Auto-run tests on file changes
cargo watch -x test
```

  </TabItem>
</Tabs>

<Aside type="tip" title="Test-Driven Development">
When adding new features:
1. Write a failing test first
2. Implement the feature
3. Verify the test passes
4. Add edge case tests
</Aside>

---

## Code Quality

All code must pass formatting and linting checks before being merged.

### Formatting

<Steps>

1. **Check formatting**

   ```bash
   cargo fmt --all --check
   ```

2. **Auto-format code**

   ```bash
   cargo fmt --all
   ```

</Steps>

<Aside type="caution" title="CI Requirement">
Unformatted code will fail CI checks and block your PR from being merged.
</Aside>

### Linting

<Steps>

1. **Run clippy**

   ```bash
   cargo clippy --all-targets --all-features -- -D warnings
   ```

2. **Fix clippy warnings**

   ```bash
   cargo clippy --all-targets --all-features --fix
   ```

</Steps>

<Aside type="caution" title="Zero Warnings Policy">
All clippy warnings must be resolved. The CI runs with `-D warnings` which treats warnings as errors.
</Aside>

### Pre-Commit Checklist

Before committing, run this sequence:

```bash
# 1. Format code
cargo fmt --all

# 2. Check for warnings
cargo clippy --all-targets --all-features -- -D warnings

# 3. Run all tests
cargo test

# 4. Build release binary
cargo build --release
```

<Aside type="tip" title="Automation Tip">
Create a shell alias for the pre-commit checks:

```bash
# Add to ~/.zshrc or ~/.bashrc
alias precommit='cargo fmt --all && cargo clippy --all-targets --all-features -- -D warnings && cargo test'
```

Then just run `precommit` before committing!
</Aside>

---

## Development Guidelines

### Code Style

<CardGrid>
  <Card title="Naming Conventions" icon="document">
    - **Functions**: `snake_case`
    - **Types**: `CamelCase`
    - **Constants**: `SCREAMING_SNAKE_CASE`
    - Use descriptive names
  </Card>
  
  <Card title="Comments" icon="pencil">
    - Use `//` for inline comments
    - Use `/* */` for section headers only
    - No decorative dividers
    - Explain "why", not "what"
  </Card>
  
  <Card title="Function Design" icon="star">
    - Single responsibility
    - Prefer &lt;50 lines
    - Use `Result<T>` for errors
    - Document public functions
  </Card>
  
  <Card title="Error Handling" icon="warning">
    - Use `anyhow::Result`
    - Add context with `.context()`
    - User-friendly messages
    - Proper error propagation
  </Card>
</CardGrid>

### Testing Guidelines

<Aside type="note" title="Test Requirements">

**All new features must include:**
- ‚úÖ Unit tests for core logic
- ‚úÖ Integration tests for CLI commands
- ‚úÖ Edge case tests for error conditions
- ‚úÖ Documentation updates

</Aside>

**Test Naming:**
```rust
// ‚úÖ Good: Descriptive and clear
#[test]
fn test_activate_missing_distro() { ... }

// ‚ùå Bad: Vague and unclear
#[test]
fn test_activate() { ... }
```

**Test Structure:**
```rust
#[test]
fn test_feature_name() {
    // Arrange: Set up test data
    let input = create_test_input();
    
    // Act: Execute the code
    let result = function_under_test(input);
    
    // Assert: Verify expectations
    assert!(result.is_ok());
}
```

---

## Commit Guidelines

<Badge text="Conventional Commits" variant="tip" size="large" />

We follow the [Conventional Commits](https://www.conventionalcommits.org/) specification for clear, structured commit
history.

### Commit Format

```
<type>: <description>

[optional body]

[optional footer]
```

### Commit Types

| Type | When to Use | Example |
|------|------------|---------|
| `feat:` | New features | `feat: add support for ROS 2 Jazzy distribution` |
| `fix:` | Bug fixes | `fix: resolve symlink validation error on macOS` |
| `docs:` | Documentation only | `docs: update getting started guide with troubleshooting` |
| `test:` | Test changes | `test: add edge case tests for broken symlinks` |
| `refactor:` | Code refactoring | `refactor: extract symlink creation logic` |
| `chore:` | Maintenance | `chore: update dependencies` |
| `ci:` | CI/CD changes | `ci: add clippy check to GitHub Actions` |

### Commit Rules

<Aside type="caution" title="Commit Requirements">

- ‚úÖ Subject line ‚â§72 characters
- ‚úÖ Use imperative mood ("add" not "added")
- ‚úÖ No period at end of subject
- ‚úÖ Separate subject from body with blank line
- ‚úÖ Body explains "what" and "why", not "how"

</Aside>

### Good Commit Examples

```bash
feat: add support for ROS 2 Jazzy distribution

Adds detection and symlink management for Jazzy Jalisco.
Updates robostack channel to robostack-jazzy.
```

```bash
fix: resolve symlink validation error on macOS

The symlink validation was failing on macOS due to different
readlink behavior. Updated to use std::fs::read_link for
cross-platform compatibility.

Fixes #42
```

```bash
docs: update getting started guide with troubleshooting

Adds common troubleshooting scenarios:
- Permission denied errors
- Distribution not detected
- Shell integration issues
```

### Bad Commit Examples

```bash
# ‚ùå Too vague
fix: bug fix

# ‚ùå Not imperative mood  
feat: added new feature

# ‚ùå Too long subject
feat: add support for ROS 2 Jazzy distribution including detection, symlinks, and documentation updates

# ‚ùå Wrong type
chore: add new feature
```

---

## Pull Request Process

### Before Submitting

<Steps>

1. **Create a feature branch**

   ```bash
   git checkout -b feature/my-feature
   ```

   <Aside type="tip" title="Branch Naming">
   Use descriptive branch names:
   - `feature/jazzy-support`
   - `fix/macos-symlink-validation`
   - `docs/troubleshooting-guide`
   </Aside>

2. **Make your changes**

   Edit code, add tests, update docs

3. **Run quality checks**

   ```bash
   cargo fmt --all --check
   cargo clippy -- -D warnings
   cargo test
   ```

4. **Commit with conventional commits**

   ```bash
   git add .
   git commit -m "feat: add support for feature X"
   ```

5. **Push to your fork**

   ```bash
   git push origin feature/my-feature
   ```

6. **Open a pull request**

   Go to GitHub and click "New Pull Request"

</Steps>

### PR Description Template

```markdown
## Description
Brief description of what this PR does

## Type of Change
- [ ] Bug fix
- [ ] New feature
- [ ] Documentation update
- [ ] Refactoring

## Changes Made
- Added X functionality
- Fixed Y issue
- Updated Z documentation

## Testing
- [ ] All existing tests pass
- [ ] Added new tests for changes
- [ ] Tested manually on macOS/Linux

## Checklist
- [ ] Code follows style guidelines
- [ ] Ran `cargo fmt --all`
- [ ] Ran `cargo clippy` with no warnings
- [ ] Updated documentation
- [ ] Added tests for new features
```

### PR Review Process

<Steps>

1. **Automated checks run**

   CI runs formatting, linting, and tests

2. **Maintainer reviews code**

   Reviews logic, tests, and documentation

3. **Address feedback**

   Make requested changes and push updates

4. **Approval and merge**

   Once approved, maintainer merges your PR

</Steps>

<Aside type="note" title="Review Timeline">
Most PRs are reviewed within 2-3 days. Complex changes may take longer for thorough review.
</Aside>

---

## Release Process

<Badge text="Automated" variant="success" /> <Badge text="GitHub Actions" variant="tip" />

Releases are fully automated via GitHub Actions. Maintainers trigger releases by creating tags.

### Creating a Release

<Steps>

1. **Update version in `Cargo.toml`**

   ```toml
   [package]
   name = "ros2env"
   version = "0.2.0"  # Increment version
   ```

2. **Commit version bump**

   ```bash
   git add Cargo.toml
   git commit -m "chore: bump version to 0.2.0"
   ```

3. **Create and push tag**

   ```bash
   git tag v0.2.0
   git push origin v0.2.0
   ```

4. **GitHub Actions automatically:**

   - ‚úÖ Runs CI tests
   - ‚úÖ Builds binaries (Linux x86_64, macOS ARM64)
   - ‚úÖ Builds conda packages (rattler-build)
   - ‚úÖ Generates changelog (git-cliff)
   - ‚úÖ Creates GitHub release with artifacts

</Steps>

<Aside type="caution" title="Maintainers Only">
Only project maintainers can create releases. Contributors should submit PRs instead.
</Aside>

### Versioning

We follow [Semantic Versioning](https://semver.org/):

- **MAJOR** (0.x.0): Breaking changes
- **MINOR** (0.x.0): New features (backward compatible)
- **PATCH** (0.0.x): Bug fixes

<Aside type="note" title="Pre-1.0 Status">
Currently at version <Badge text="v0.1.0" variant="note" />. The API may change before reaching v1.0.0.
</Aside>

---

## Documentation

Documentation is built with <Badge text="Astro Starlight" variant="tip" />

### Local Development

<Steps>

1. **Navigate to docs directory**

   ```bash
   cd docs
   ```

2. **Install dependencies**

   ```bash
   pnpm install
   ```

3. **Start dev server**

   ```bash
   pnpm dev
   ```

   Opens at: `http://localhost:4321/ros2env/`

4. **Make changes**

   Edit files in `src/content/docs/`

5. **Build for production**

   ```bash
   pnpm build
   ```

</Steps>

<Aside type="tip" title="Live Reload">
The dev server automatically reloads when you save changes. Keep it running while editing docs!
</Aside>

### Documentation Guidelines

<CardGrid>
  <Card title="Clear Structure" icon="document">
    - Use headings hierarchy (h2, h3, h4)
    - Break content into digestible sections
    - Add table of contents for long pages
  </Card>
  
  <Card title="Visual Elements" icon="star">
    - Use Cards for feature highlights
    - Add Asides for tips and warnings
    - Include Steps for tutorials
    - Show code examples
  </Card>
  
  <Card title="Examples" icon="open-book">
    - Provide working code examples
    - Show expected output
    - Cover common use cases
    - Include troubleshooting
  </Card>
  
  <Card title="Cross-linking" icon="link">
    - Link to related pages
    - Reference other sections
    - Use LinkCards for navigation
    - Add "Next Steps" sections
  </Card>
</CardGrid>

---

## Getting Help

<CardGrid>
  <LinkCard
    title="üìñ Read the Docs"
    description="Comprehensive documentation at alvgaona.github.io/ros2env"
    href="https://alvgaona.github.io/ros2env/"
  />
  <LinkCard
    title="üí¨ Ask Questions"
    description="Open an issue for questions or discussions"
    href="https://github.com/alvgaona/ros2env/issues/new"
  />
  <LinkCard
    title="üêõ Report Bugs"
    description="Found a bug? Let us know with details"
    href="https://github.com/alvgaona/ros2env/issues/new"
  />
  <LinkCard
    title="‚ú® Feature Requests"
    description="Propose new features or improvements"
    href="https://github.com/alvgaona/ros2env/issues/new"
  />
</CardGrid>

### Before Opening an Issue

<Steps>

1. **Search existing issues**

   Your question may already be answered

2. **Gather information**

   - OS and version (macOS/Linux)
   - rosenv version (`rosenv --version`)
   - Rust version (`rustc --version`)
   - Steps to reproduce

3. **Create minimal example**

   Simplify the problem to its core

4. **Open detailed issue**

   Include all relevant information

</Steps>

<Aside type="tip" title="Good Bug Reports">

A good bug report includes:
- **What you expected** to happen
- **What actually happened**
- **Steps to reproduce** the issue
- **System information** (OS, versions)
- **Error messages** (if any)

</Aside>

---

## Code of Conduct

<Aside type="note" title="Be Respectful">

We're committed to providing a welcoming environment for all contributors. Please:

- ‚úÖ Be professional and respectful
- ‚úÖ Focus on technical merit
- ‚úÖ Provide constructive feedback
- ‚úÖ Welcome newcomers
- ‚úÖ Be patient with questions
- ‚ùå No harassment or discrimination
- ‚ùå No trolling or inflammatory comments

</Aside>

---

## Thank You!

<CardGrid>
  <Card title="üéâ Your contributions matter!" icon="star">
    Every contribution, no matter how small, helps make ros2env better for the ROS 2 community.
  </Card>
  <Card title="üöÄ Ready to start?" icon="rocket">
    Fork the repository, make your changes, and submit a PR. We're excited to see what you build!
  </Card>
</CardGrid>

<LinkCard
  title="üîó View Project on GitHub"
  description="github.com/alvgaona/ros2env"
  href="https://github.com/alvgaona/ros2env"
/>

Thank you for contributing to ros2env! üéâ
